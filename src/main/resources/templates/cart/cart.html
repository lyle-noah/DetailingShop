<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Your Cart</title>
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet">
    <!-- 기존 스타일시트들 -->
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/dropDown_form01.css">
    <link rel="stylesheet" href="/css/category_form01.css">
    <link rel="stylesheet" href="/css/pagination_form01.css">
    <link rel="stylesheet" href="/css/itemCount_form01.css">
    <link rel="stylesheet" href="/css/mobileMenu_form01.css">
    <link rel="stylesheet" href="/css/search_form01.css">
</head>
<body class="bg-gray-100">

<!-- 검색 모달 -->
<div th:replace="~{forms/search_form01.html :: searchProduct01}"></div>

<!-- Header -->
<div th:replace="~{header/header.html :: header}"></div>

<!-- 장바구니 화면 -->
<main class="container mx-auto px-4 py-16">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-blue-600">장바구니</h1>
    </div>

    <!-- Check if the cart is empty -->
    <div th:if="${cart.products != null and cart.products.size() > 0}">
        <table class="w-full bg-white border border-gray-300 rounded-lg shadow-md">
            <thead class="bg-gray-200 border-b border-gray-300">
            <tr>
                <th class="p-4 text-left">Product Image</th>
                <th class="p-4 text-left">Product ID</th>
                <th class="p-4 text-left">Product Name</th>
                <th class="p-4 text-left">Price (KRW)</th>
                <th class="p-4 text-left">Quantity</th>
                <th class="p-4 text-left">Total (KRW)</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product : ${cart.products}" class="border-b border-gray-200">
                <td class="p-4">
                    <img th:src="@{${product.imgurl}}" alt="Product Image" class="w-20 h-auto"/>
                </td>
                <td class="p-4" th:text="${product.indexId}">Product ID</td>
                <td class="p-4" th:text="${product.productName}">Product Name</td>
                <td class="p-4 text-right" th:text="'₩' + ${#numbers.formatDecimal(product.productPrice, 0, 'COMMA', 0, 'POINT')}">Price</td>
                <td class="p-4 text-center">1</td> <!-- Assuming quantity is 1 for simplicity -->
                <td class="p-4 text-right" th:text="'₩' + ${#numbers.formatDecimal(product.productPrice * 1, 0, 'COMMA', 0, 'POINT')}">Total</td>
            </tr>
            </tbody>
        </table>

        <!-- Cart summary -->
        <div class="mt-8">
            <div class="text-right text-lg font-semibold">
                <span>Total: </span>
                <span th:text="'₩' + ${#numbers.formatDecimal(totalPrice, 0, 'COMMA', 0, 'POINT')}">₩0</span>
            </div>
            <div class="mt-4 text-right">
                <a href="/" class="inline-block px-6 py-3 bg-blue-500 text-white rounded hover:bg-blue-600">🛍️ 쇼핑 계속하기</a>
                <a href="/checkout" class="inline-block px-6 py-3 bg-green-500 text-white rounded hover:bg-green-600 ml-4">💳 결제하기</a>
            </div>
        </div>
    </div>

    <!-- 메시지 출력: 장바구니가 비었을 경우 -->
    <div th:if="${cart == null or cart.products == null or cart.products.size() == 0}" class="text-center mt-8">
        <p class="text-xl font-semibold">장바구니에 상품이 없습니다.</p>
        <a href="/" class="mt-3 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">쇼핑 계속하기</a>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{footer/footer.html :: footer}"></div>

<!-- 스크립트 파일들 -->
<script src="/js/header.js"></script>
<script src="/js/dropDown_form01.js"></script>
<script src="/js/mobileMenu_form01.js"></script>
<script src="/js/search_form01.js"></script>
</body>
</html>
