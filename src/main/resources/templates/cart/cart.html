<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Your Cart</title>
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/dropDown_form01.css">
    <link rel="stylesheet" href="/css/category_form01.css">
    <link rel="stylesheet" href="/css/pagination_form01.css">
    <link rel="stylesheet" href="/css/itemCount_form01.css">
    <link rel="stylesheet" href="/css/mobileMenu_form01.css">
    <link rel="stylesheet" href="/css/search_form01.css">
    <link rel="stylesheet" href="/css/cart.css">
</head>
<body class="bg-gray-100">

<!-- Í≤ÄÏÉâ Î™®Îã¨ -->
<div th:replace="~{forms/search_form01.html :: searchProduct01}"></div>

<!-- Header -->
<div th:replace="~{header/header.html :: header}"></div>

<!-- Ïû•Î∞îÍµ¨Îãà ÌôîÎ©¥ -->
<main class="container mx-auto px-4 mt-8">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold">Ïû•Î∞îÍµ¨Îãà</h1>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Ïû•Î∞îÍµ¨Îãà ÏïÑÏù¥ÌÖú Î¶¨Ïä§Ìä∏ -->
        <div class="md:col-span-2">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <table class="w-full text-left">
                    <thead>
                    <tr class="border-b">
                        <th class="pb-4">ÏÉÅÌíà Ï†ïÎ≥¥</th>
                        <th class="pb-4 text-center">ÏàòÎüâ</th>
                        <th class="pb-4 text-right">Í∞ÄÍ≤©</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="product : ${cart.products}" class="border-b">
                        <td class="py-4">
                            <div class="flex items-center">
                                <img th:src="@{${product.imgurl}}" alt="Product Image" class="w-16 h-auto rounded mr-4"/>
                                <div>
                                    <h2 class="text-lg font-semibold" th:text="${product.productName}">Product Name</h2>
                                    <p class="text-sm text-gray-500 mt-1" th:text="'‚Ç©' + ${#numbers.formatDecimal(product.productPrice, 0, 'COMMA', 0, 'POINT')}">Price</p>
                                    <button type="submit" th:action="@{/cart/delete}" class="mt-2 text-red-500 text-sm hover:underline">ÏÇ≠Ï†ú</button>
                                </div>
                            </div>
                        </td>
                        <td class="py-4 text-center">
                            <form class="update-form" th:action="@{/cart/update}" method="post">
                                <input type="hidden" name="productId" th:value="${product.indexId}" />
                                <input type="number" name="cartCount" th:value="${product.cartCount}" min="1" max="100" class="w-16 p-2 border rounded text-center" oninput="updateTotalPrice(this)" />
                            </form>
                        </td>
                        <td class="py-4 text-right font-bold text-blue-600" th:text="'‚Ç©' + ${#numbers.formatDecimal(product.productPrice * product.cartCount, 0, 'COMMA', 0, 'POINT')}">‚Ç©0</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Ïû•Î∞îÍµ¨Îãà ÏöîÏïΩ -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">Ï£ºÎ¨∏ ÏöîÏïΩ</h2>
            <div class="flex justify-between items-center mb-2">
                <span class="text-gray-700">Ï¥ù ÏÉÅÌíà Í∏àÏï°</span>
                <span th:text="'‚Ç©' + ${#numbers.formatDecimal(totalPrice, 0, 'COMMA', 0, 'POINT')}" class="font-bold text-blue-600">‚Ç©0</span>
            </div>
            <div class="flex justify-between items-center mb-6">
                <span class="text-gray-700">Ï¥ù Î∞∞ÏÜ°ÎπÑ</span>
                <span class="font-bold text-blue-600">‚Ç©0</span>
            </div>
            <div class="flex justify-between items-center text-lg font-semibold border-t pt-4">
                <span class="text-gray-900">Í≤∞Ï†ú ÏòàÏ†ï Í∏àÏï°</span>
                <span th:text="'‚Ç©' + ${#numbers.formatDecimal(totalPrice, 0, 'COMMA', 0, 'POINT')}" class="font-bold text-blue-600">‚Ç©0</span>
            </div>
            <div class="mt-6">
                <a href="/" class="block w-full text-center bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700">üõçÔ∏è ÏáºÌïë Í≥ÑÏÜçÌïòÍ∏∞</a>
                <a href="javascript:void(0);" onclick="requestPay()" class="block w-full text-center bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 mt-4">üí≥ Í≤∞Ï†úÌïòÍ∏∞</a>
            </div>
        </div>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{footer/footer.html :: footer}"></div>

<!-- Ïä§ÌÅ¨Î¶ΩÌä∏ ÌååÏùºÎì§ -->
<script src="/js/header.js"></script>
<script src="/js/dropDown_form01.js"></script>
<script src="/js/mobileMenu_form01.js"></script>
<script src="/js/search_form01.js"></script>
<script src="/js/cart.js"></script>

</body>
</html>
