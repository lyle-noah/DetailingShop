<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Car Detailing Shop</title>
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/dropDown_form01.css">
    <link rel="stylesheet" href="/css/category_form01.css">
    <link rel="stylesheet" href="/css/mobileMenu_form01.css">
    <link rel="stylesheet" href="/css/search_form01.css">
    <link rel="stylesheet" href="/css/detail.css">
    <link rel="stylesheet" href="/css/likebutton_form01.css">
    <link rel="stylesheet" href="/css/modal_form01.css">
    <link rel="stylesheet" href="/css/modal_form02.css">
    <link rel="stylesheet" href="/css/magnifier_form01.css">

</head>
<body class="bg-gray-100">
<!-- Í≤ÄÏÉâ Î™®Îã¨ -->
<div th:replace="~{forms/search_form01.html :: searchProduct01}"></div>

<!-- Ìó§Îçî -->
<div th:replace="~{header/header.html :: header}"></div>

<main class="container mx-auto px-4 product-page">
    <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î∞î (Breadcrumbs) -->
    <nav class="mb-4 breadcrumbs">
        <a href="/" class="hover:text-gray-800">Ìôà</a> /
        <span th:text="${product.firstCategory}"></span> /
        <span th:text="${product.productName}"></span>
    </nav>

    <!-- ÏÉÅÌíà Ï†ïÎ≥¥ ÏÑπÏÖò -->
    <div class="product-container">
        <!-- ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ -->
        <div class="product-image-container">
            <img id="mainImage" th:src="@{${product.imgurl}}" alt="Product Image" class="w-full">

            <!-- Ï¢ãÏïÑÏöî Î≤ÑÌäº Î™®ÎìàÌôîÎêú ÌîÑÎûòÍ∑∏Î®ºÌä∏ ÏÇΩÏûÖ -->
            <div th:replace="~{forms/likeButton_form01.html :: likeButton}">
                <input type="hidden" name="redirectUrl" th:value="@{'/detail/' + ${product.indexId}}" />
            </div>

            <!-- ÏïàÎÇ¥ Î¨∏Íµ¨ -->
            <p id="hoverText" class="hover-text">üîç ÎßàÏö∞Ïä§Î•º Ïò¨Î†§Î≥¥ÏÑ∏Ïöî.</p>

            <!-- Ï§å Î†åÏ¶à Î∞è ÌôïÎåÄÎêú Ïù¥ÎØ∏ÏßÄ Ïª®ÌÖåÏù¥ÎÑà -->
            <div th:replace="~{forms/magnifier_form01.html :: magnifier}"></div>
        </div>

        <!-- ÏÉÅÌíà Ï†ïÎ≥¥ -->
        <div class="product-details">
            <h1 class="product-title" th:text="${product.productName}"></h1>

            <!-- Í∞ÄÍ≤© Ï†ïÎ≥¥ -->
            <div class="product-price">
                <span th:text="${product.formattedPrice}"></span>
            </div>

            <!-- Î∞∞ÏÜ° Ï†ïÎ≥¥ -->
            <div class="shipping-info">
                <p>Íµ≠ÎÇ¥¬∑Ìï¥Ïô∏Î∞∞ÏÜ°: Íµ≠ÎÇ¥Î∞∞ÏÜ°</p>
                <p>Î∞∞ÏÜ°Î∞©Î≤ï: ÌÉùÎ∞∞</p>
                <p>Î∞∞ÏÜ°ÎπÑ: 3,000Ïõê (30,000Ïõê Ïù¥ÏÉÅ Íµ¨Îß§ Ïãú Î¨¥Î£å)</p>
            </div>

            <!-- ÏàòÎüâ ÏÑ†ÌÉùÍ∏∞ -->
            <div class="cartCount-selector">
                <label for="quantityInput" class="block text-sm font-medium text-gray-700">ÏàòÎüâ:</label>
                <div class="flex items-center mt-1">
                    <button type="button" class="px-3 py-1" onclick="decreaseCartCount()">-</button>
                    <input id="quantityInput" name="cartCount" type="text" value="1" class="text-center w-12 border border-gray-300 py-1">
                    <button type="button" class="px-3 py-1" onclick="increaseCartCount()">+</button>
                </div>
            </div>
            
            <!-- Ï¥ù Í∞ÄÍ≤© -->
            <div class="total-price">
                Ï¥ù Í∏àÏï° : <span id="totalPrice" data-unit-price="${product.price}" th:text="${product.formattedPrice}"></span>
            </div>

            <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
            <div class="action-buttons">
                <button class="buy-now">BUY IT NOW</button>
                <form th:action="@{/cart/add/{indexId}(indexId=${product.indexId})}" method="post" class="cart-form add-to-cart-form">
                    <input type="hidden" name="productId" th:value="${product.indexId}"/>
                    <input type="hidden" id="finalCartCount" name="cartCount" value="1"/> <!-- ÏµúÏ¢Ö ÏàòÎüâ ÏÑ§Ï†ï -->
                    <input type="hidden" name="redirectUrl" th:value="@{'/detail/' + ${product.indexId}}"/> <!-- Ï∂îÍ∞ÄÎêú redirectUrl -->
                    <button type="submit" class="cart">CART</button>
                </form>
                <button class="wishlist">WISH LIST</button>
            </div>
        </div>
    </div>
</main>

<!-- Ïû•Î∞îÍµ¨Îãà Î™®Îã¨ hidden Ï≤òÎ¶¨ÎêòÏñ¥ÏûàÏùå. -->
<div th:replace="~{forms/modal_form01.html :: cartModal}"></div>
<div th:replace="~{forms/modal_form02.html :: cartModalExist}"></div>

<!-- Ìë∏ÌÑ∞ -->
<div th:replace="~{footer/footer.html :: footer}"></div>

<script src="/js/header.js"></script>
<script src="/js/detail.js"></script>
<script src="/js/dropDown_form01.js"></script>
<script src="/js/mobileMenu_form01.js"></script>
<script src="/js/search_form01.js"></script>
<script src="/js/modal_form01.js"></script>
<script src="/js/modal_form02.js"></script>
<script src="/js/magnifier_form01.js"></script>
</body>
</html>
