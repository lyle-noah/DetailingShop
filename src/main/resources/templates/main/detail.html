<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Car Detailing Shop</title>
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/dropDown_form01.css">
    <link rel="stylesheet" href="/css/category_form01.css">
    <link rel="stylesheet" href="/css/mobileMenu_form01.css">
    <link rel="stylesheet" href="/css/search_form01.css">
    <link rel="stylesheet" href="/css/detail.css">
</head>
<body class="bg-gray-100">
<!-- 검색 모달 -->
<div th:replace="~{forms/search_form01.html :: searchProduct01}"></div>

<!-- Header -->
<div th:replace="~{header/header.html :: header}"></div>

<main class="container mx-auto px-4 product-page">
    <!-- Breadcrumbs -->
    <nav class="mb-4 breadcrumbs">
        <a href="/" class="hover:text-gray-800">홈</a> /
        <span th:text="${product.firstCategory}"></span> /
        <span th:text="${product.productName}"></span>
    </nav>

    <!-- Product Details Section -->
    <div class="product-container">
        <!-- Product Image -->
        <div class="product-image">
            <img th:src="@{${product.imgurl}}" alt="Product Image" class="rounded-lg shadow-lg w-full">
            <p class="mt-2 text-center text-sm text-gray-500">🔍 마우스를 올려보세요.</p>
        </div>

        <!-- Product Info -->
        <div class="product-details">
            <h1 class="product-title" th:text="${product.productName}"></h1>

            <!-- Price -->
            <div class="product-price">
                <span th:text="${product.formattedPrice}"></span>
            </div>

            <!-- Shipping Info -->
            <div class="shipping-info">
                <p>국내·해외배송: 국내배송</p>
                <p>배송방법: 택배</p>
                <p>배송비: 3,000원 (30,000원 이상 구매 시 무료)</p>
            </div>

            <!-- Quantity Selector -->
            <div class="quantity-selector">
                <label for="quantity" class="block text-sm font-medium text-gray-700">수량:</label>
                <div class="flex items-center mt-1">
                    <button class="px-3 py-1">-</button>
                    <input id="quantity" type="text" value="1" class="text-center w-12 border border-gray-300 py-1">
                    <button class="px-3 py-1">+</button>
                </div>
            </div>

            <!-- Total Price -->
            <div class="total-price">
                TOTAL : <span th:text="${product.formattedPrice}"></span>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="buy-now">BUY IT NOW</button>
                <form action="/cart/add" method="post" class="cart-form">
                    <input type="hidden" name="productId" th:value="${product.indexId}"/>
                    <input type="hidden" name="_csrf" th:value="${_csrf.token}"/> <!-- CSRF 토큰 추가 -->
                    <button type="submit" class="cart">CART</button>
                </form>
                <button class="wishlist">WISH LIST</button>
            </div>
        </div>
    </div>
</main>

<!-- 모달 창 구조 -->
<div id="cart-modal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg overflow-hidden shadow-lg w-11/12 max-w-lg">
        <div class="p-4">
            <h2 class="text-2xl font-bold mb-4">상품이 장바구니에 담겼습니다!</h2>
            <div class="flex justify-end space-x-4">
                <button id="continue-shopping" class="bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400">쇼핑 계속하기</button>
                <button id="go-to-cart" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">장바구니로 이동</button>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div th:replace="~{footer/footer.html :: footer}"></div>

<script src="/js/header.js"></script>
<script src="/js/dropDown_form01.js"></script>
<script src="/js/mobileMenu_form01.js"></script>
<script src="/js/search_form01.js"></script>
<script src="/js/detail.js"></script>

</body>
</html>